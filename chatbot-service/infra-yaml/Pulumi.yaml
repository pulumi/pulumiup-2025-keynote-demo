name: infra-yaml
description: A containerized chatbot application deployed to AWS ECS Fargate with an Application Load Balancer
runtime: yaml
packages:
  container-app: ../../components/container-app@0.1.0
resources:
  # Create the container app using our component
  app:
    type: container-app:index:ContainerApp
    properties:
      appPath: ${app_path}
      appPort: ${app_port}
      env:
        ENVIRONMENT: ${environment}
      cpu: ${cpu}
      memory: ${memory}
      desiredCount: ${desired_count}
      secrets:
        OPENAI_API_KEY: ${openai_api_key}
# Export the URL of the deployed application
outputs:
  url: ${app.url}
config:
  pulumi:tags:
    value:
      pulumi:template: ../../templates/chatbot-container-app
